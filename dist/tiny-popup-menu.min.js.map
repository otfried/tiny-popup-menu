{"version":3,"file":"tiny-popup-menu.min.js","sources":["../node_modules/tiny-emitter/index.js","../src/@enums.ts","../src/myPragma.ts","../src/defaults.ts","../src/tiny-popup-menu.tsx","../src/index-umd.ts"],"sourcesContent":["function E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\nmodule.exports.TinyEmitter = E;\n","/**\n * Available menu positions\n */\nexport enum Position {\n\tTop = \"top\",\n\tBottom = \"bottom\",\n}\n\nexport enum SubmenuPosition {\n\tLeft = \"left\",\n\tRight = \"right\",\n}\n","export default function createElement(\n\ttagName,\n\tattrs = {},\n\t...children\n): HTMLElement {\n\tif (typeof tagName === \"function\") return tagName(attrs, children);\n\n\tconst elem =\n\t\ttagName === null ? new DocumentFragment() : document.createElement(tagName);\n\n\tObject.entries(attrs || {}).forEach(([name, value]) => {\n\t\tif (typeof value !== undefined && value !== null && value !== undefined) {\n\t\t\tif (name.startsWith(\"on\") && name.toLowerCase() in window)\n\t\t\t\telem.addEventListener(name.toLowerCase().substr(2), value);\n\t\t\telse {\n\t\t\t\tif (name === \"className\") elem.setAttribute(\"class\", value.toString());\n\t\t\t\telse if (name === \"htmlFor\") elem.setAttribute(\"for\", value.toString());\n\t\t\t\telse elem.setAttribute(name, value.toString());\n\t\t\t}\n\t\t}\n\t});\n\n\tfor (const child of children) {\n\t\tif (!child) continue;\n\t\tif (Array.isArray(child)) elem.append(...child);\n\t\telse {\n\t\t\tif (child.nodeType === undefined) elem.innerHTML += child;\n\t\t\telse elem.appendChild(child);\n\t\t}\n\t}\n\treturn elem;\n}\n","import { Position } from \"./@enums.js\";\nimport { Options } from \"./tiny-popup-menu.js\";\n\nexport const defaultOptions: Options = {\n\tposition: Position.Bottom,\n\tclassName: \"\",\n\tautoClose: true,\n\tarrow: true,\n\tmargin: undefined, // autocalculate later\n\toffset: {\n\t\tx: 0,\n\t\ty: 0,\n\t},\n\tmenuItems: [],\n\tstopClick: true,\n};\n","import { TinyEmitter } from \"tiny-emitter\";\n\nimport myPragma from \"./myPragma\";\n\nimport \"./assets/scss/tiny-popup-menu.scss\";\nimport { defaultOptions } from \"./defaults.js\";\nimport { Position, SubmenuPosition } from \"./@enums.js\";\n\nimport arrowLeft from \"./assets/svg/arrow_left.svg\";\nimport arrowRight from \"./assets/svg/arrow_right.svg\";\n\nconst ID = \"popup-menu\";\nconst CLASS_CONTAINER = ID + \"--container\";\nconst CLASS_OPEN = ID + \"--active\";\nconst CLASS_SHOW_ARROW = ID + \"--show-arrow\";\nconst CLASS_SHOW_ARROW_TOP = ID + \"--show-arrow-top\";\nconst CLASS_SHOW_ARROW_BOTTOM = ID + \"--show-arrow-bottom\";\nconst CLASS_ITEM = ID + \"--item\";\nconst CLASS_SUBMENU = ID + \"--submenu\";\nconst CLASS_SUBMENU_ARROW = ID + \"--submenu-arrow\";\nconst CLASS_SUBMENU_CONTENT = ID + \"--submenu-content\";\nconst CLASS_ITEM_SEPARATOR = ID + \"--item-separator\";\n\n// Count the running instances to add a unique id at each one\nlet instances = 1;\n\n/**\n *\n * @param target\n * @param sources\n * @returns\n */\nconst deepObjectAssign = (target, ...sources) => {\n\tsources.forEach((source) => {\n\t\tObject.keys(source).forEach((key) => {\n\t\t\tconst s_val = source[key];\n\t\t\tconst t_val = target[key];\n\t\t\ttarget[key] =\n\t\t\t\tt_val &&\n\t\t\t\ts_val &&\n\t\t\t\ttypeof t_val === \"object\" &&\n\t\t\t\ttypeof s_val === \"object\" &&\n\t\t\t\t!Array.isArray(t_val) // Don't merge arrays\n\t\t\t\t\t? deepObjectAssign(t_val, s_val)\n\t\t\t\t\t: s_val;\n\t\t});\n\t});\n\treturn target;\n};\n\n/**\n * Tiny vanilla javascript library to display popup menus next to button togglers.\n *\n * The popup menu uses a fixed position calculated by javascript, allowing the toggler to be inside of scrollables elements, auto adjust margins, evaluate the position (to be on top or at the bottom of the toggler), etc.\n *\n * If you want only one menu open at a time, use one instance. Instead if you want multiples menus opened at the same time, create multiples instances.\n *\n * @fires open\n * @fires close\n * @fires updateposition\n * @extends TinyEmitter\n */\nexport default class TinyPopupMenu extends TinyEmitter {\n\tprivate _isOpen = false;\n\tprivate _toggler: HTMLElement;\n\tprivate _containerMenu: HTMLElement;\n\tprivate _menuItemsList: HTMLElement[];\n\tprivate _instanceOptions: Options;\n\tprivate _options: OpenOptions;\n\n\tprivate _closeListener: (evt: CustomEvent) => void;\n\tprivate _resizeListener: (evt: CustomEvent) => void;\n\tprivate _scrollListener: (evt: CustomEvent) => void;\n\n\tconstructor(options: Options = null) {\n\t\tsuper();\n\t\tthis._containerMenu = <div id={`${ID}-${instances}`}></div>;\n\t\tthis._instanceOptions = options;\n\t\tinstances++;\n\t}\n\n\t/**\n\t * Open Menu\n\t * @fires open\n\t * @param options\n\t * @returns\n\t */\n\tpublic open(options: OpenOptions): void {\n\t\tthis._options = this._parseOptions(options) as OpenOptions;\n\n\t\tif (this.isOpen()) {\n\t\t\t// clean menu items\n\t\t\tthis.close();\n\n\t\t\t// if the same button is clicked, do not reopen\n\t\t\tif (options.event.currentTarget === this._toggler) {\n\t\t\t\tif (this._options.stopClick) {\n\t\t\t\t\toptions.event.preventDefault();\n\t\t\t\t\toptions.event.stopPropagation();\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tconst { event, menuItems, autoClose, stopClick } = this._options;\n\n\t\tthis._toggler = event.currentTarget as HTMLElement;\n\n\t\tlet hasSubmenu = false;\n\n\t\tthis._menuItemsList = menuItems.map((item) => {\n\t\t\tif (item === \"-\") {\n\t\t\t\treturn <span className={CLASS_ITEM_SEPARATOR}></span>;\n\t\t\t} else if (\"items\" in item) {\n\t\t\t\thasSubmenu = true;\n\t\t\t\treturn this._processSubMenu(item, autoClose);\n\t\t\t} else {\n\t\t\t\treturn this._processMenuItem(item, autoClose);\n\t\t\t}\n\t\t});\n\n\t\tthis._isOpen = true;\n\n\t\tthis.updatePosition();\n\n\t\tif (hasSubmenu) {\n\t\t\tthis._updateSubmenusPosition();\n\t\t}\n\n\t\t// delay to prevent click be fired inmediatly if `stopClick` is false\n\t\tsetTimeout(() => {\n\t\t\tthis.addEventListeners();\n\t\t});\n\n\t\tthis.emit(\"open\");\n\n\t\tif (stopClick) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t}\n\t}\n\n\t/**\n\t * Close menu\n\t *\n\t * @fires close\n\t */\n\tpublic close(): void {\n\t\tif (!this.isOpen()) return;\n\n\t\tthis._containerMenu.innerHTML = \"\";\n\t\tthis._containerMenu.remove();\n\n\t\tthis._toggler.classList.remove(CLASS_OPEN);\n\t\tthis.removeEventListeners();\n\t\tthis._isOpen = false;\n\t\tthis.emit(\"close\");\n\t}\n\n\t/**\n\t * Update the position of an opened menu\n\t *\n\t * @fires updateposition\n\t */\n\tpublic updatePosition(silent = true): void {\n\t\tif (!this.isOpen()) return;\n\n\t\tconst { event, offset, className, arrow, position, margin } = this._options;\n\n\t\tthis._containerMenu.style.position = \"fixed\";\n\t\tthis._containerMenu.className = className;\n\t\tthis._containerMenu.classList.add(ID);\n\n\t\tif (arrow) {\n\t\t\tthis._containerMenu.classList.add(CLASS_SHOW_ARROW);\n\t\t}\n\n\t\tthis._containerMenu.innerHTML = \"\";\n\t\tthis._containerMenu.append(\n\t\t\t<div className={CLASS_CONTAINER}>{...this._menuItemsList}</div>,\n\t\t);\n\n\t\tdocument.body.append(this._containerMenu);\n\n\t\tif (location != null) {\n\t\t\tthis._containerMenu.style.left = event.clientX + \"px\";\n\t\t\tthis._containerMenu.style.top = event.clientY + \"px\";\n\t\t} else {\n\t\t\tconst togglerPosition = this._toggler.getBoundingClientRect();\n\n\t\t\tconst togglerHeight = this._toggler.offsetHeight;\n\t\t\tconst togglerWidth = this._toggler.offsetWidth;\n\n\t\t\t/**\n\t\t\t * Check if the default position is ok or needs to be inverted\n\t\t\t */\n\t\t\tconst evaluatePosition = (): PositionType => {\n\t\t\t\tif (position === Position.Top) {\n\t\t\t\t\tif (togglerPosition.top - menuHeight - offsetTop - margin <= 0) {\n\t\t\t\t\t\treturn Position.Bottom;\n\t\t\t\t\t}\n\t\t\t\t} else if (position === Position.Bottom) {\n\t\t\t\t\tif (\n\t\t\t\t\t\ttogglerPosition.top +\n\t\t\t\t\t\t\tmenuHeight +\n\t\t\t\t\t\t\toffsetTop +\n\t\t\t\t\t\t\ttogglerHeight +\n\t\t\t\t\t\t\tmargin >=\n\t\t\t\t\t\tdocument.documentElement.offsetHeight\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn Position.Top;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn position;\n\t\t\t};\n\n\t\t\tconst offsetLeft = offset?.x || 0;\n\t\t\tconst offsetTop = offset?.y || 0;\n\n\t\t\t// Button height + menu height\n\t\t\tconst menuHeight = this._containerMenu.offsetHeight;\n\t\t\tconst menuWidth = this._containerMenu.offsetWidth;\n\n\t\t\t// If menu is near a window limit, invert the direction\n\t\t\tconst finalPosition = evaluatePosition();\n\n\t\t\tlet compensateMenuHeight = 0;\n\n\t\t\tswitch (finalPosition) {\n\t\t\t\tcase Position.Bottom:\n\t\t\t\t\tcompensateMenuHeight = offsetTop + togglerHeight + margin;\n\t\t\t\t\tbreak;\n\t\t\t\tcase Position.Top:\n\t\t\t\t\tcompensateMenuHeight = -menuHeight - margin;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst compensateMenuWidthToCenter = -menuWidth / 2 + togglerWidth / 2;\n\n\t\t\tconst windowWidth = window.innerWidth;\n\n\t\t\tconst calculateLeft =\n\t\t\t\ttogglerPosition.left + offsetLeft + compensateMenuWidthToCenter;\n\n\t\t\tlet adjustX = 0;\n\n\t\t\t// it's outside the left border\n\t\t\tif (calculateLeft < 0) {\n\t\t\t\tadjustX = 0 - calculateLeft + margin;\n\t\t\t} else if (calculateLeft + menuWidth > windowWidth) {\n\t\t\t\t// it's outside the right border\n\t\t\t\tadjustX = windowWidth - (calculateLeft + menuWidth) - margin;\n\t\t\t}\n\n\t\t\tthis._containerMenu.style.left = calculateLeft + adjustX + \"px\";\n\t\t\tthis._containerMenu.style.top =\n\t\t\t\ttogglerPosition.top + compensateMenuHeight + \"px\";\n\n\t\t\tthis._toggler.classList.add(CLASS_OPEN);\n\n\t\t\tif (arrow) {\n\t\t\t\tconst arrowWidth = 8;\n\t\t\t\tconst extraMargin = 3;\n\t\t\t\tif (adjustX > 0) {\n\t\t\t\t\t// Prevent the arrow go outside the menu width\n\t\t\t\t\tadjustX = Math.min(menuWidth / 2 - arrowWidth - extraMargin, adjustX);\n\t\t\t\t} else {\n\t\t\t\t\tadjustX = Math.max(\n\t\t\t\t\t\t-(menuWidth / 2 - (arrowWidth + extraMargin) * 2),\n\t\t\t\t\t\tadjustX,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\t// displace X css arrow\n\t\t\t\tthis._containerMenu.style.setProperty(\n\t\t\t\t\t\"--ofx\",\n\t\t\t\t\t`${adjustX + arrowWidth}px`,\n\t\t\t\t);\n\t\t\t\tthis._evaluateArrowPosition(finalPosition);\n\t\t\t}\n\t\t}\n\n\t\tif (!silent) {\n\t\t\tthis.emit(\"updateposition\");\n\t\t}\n\t}\n\n\t/**\n\t * Instead of creating onclick listeners on each toggler/button,\n\t * you can add these using the `addToggler` method\n\t *\n\t * @param el\n\t * @param options\n\t * @param type\n\t */\n\tpublic addToggler(\n\t\tel: HTMLElement,\n\t\toptions: Options = {},\n\t\ttype: \"click\" | \"contextmenu\" = \"click\",\n\t): void {\n\t\tif (type === \"contextmenu\") {\n\t\t\tel.addEventListener(\"contextmenu\", (event) =>\n\t\t\t\tthis.open({ ...options, event }),\n\t\t\t);\n\t\t} else {\n\t\t\tel.addEventListener(\"click\", (event) => this.open({ ...options, event }));\n\t\t}\n\t}\n\n\t/**\n\t * Retunrs true if the insatance has an open menu\n\t *\n\t * @returns\n\t */\n\tpublic isOpen(): boolean {\n\t\treturn this._isOpen;\n\t}\n\n\t/**\n\t * Merge default options, instance options, and single open method options\n\t * @param options\n\t * @returns\n\t */\n\tprotected _parseOptions(options: Options): Options | OpenOptions {\n\t\tconst mergedOptions = deepObjectAssign(\n\t\t\t{},\n\t\t\tdefaultOptions,\n\t\t\tthis._instanceOptions || {},\n\t\t\toptions || {},\n\t\t);\n\n\t\t// if margin is not setled, add a default ones\n\t\tif (mergedOptions.margin === undefined) {\n\t\t\tmergedOptions.margin = (\n\t\t\t\t\"arrow\" in mergedOptions\n\t\t\t\t\t? mergedOptions.arrow\n\t\t\t\t\t: true\n\t\t\t)\n\t\t\t\t? 10\n\t\t\t\t: 2;\n\t\t}\n\n\t\treturn mergedOptions;\n\t}\n\n\t/**\n\t *\n\t * @param submenu\n\t * @param autoClose\n\t */\n\tprotected _processSubMenu(submenu: Submenu, autoClose: boolean): HTMLElement {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={CLASS_SUBMENU + \" \" + (submenu.className || \"\")}\n\t\t\t\tid={submenu.id}\n\t\t\t\tstyle={submenu.style}\n\t\t\t\tdata-position={submenu.position || SubmenuPosition.Right}\n\t\t\t>\n\t\t\t\t<span>{submenu.content}</span>\n\t\t\t\t<div className={CLASS_SUBMENU_ARROW}></div>\n\t\t\t\t<div className={CLASS_SUBMENU_CONTENT}>\n\t\t\t\t\t{submenu.items.map((item) => this._processMenuItem(item, autoClose))}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\t/**\n\t *\n\t * @param item\n\t * @param autoClose\n\t */\n\tprotected _processMenuItem(item: MenuItem, autoClose: boolean): HTMLElement {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={CLASS_ITEM + \" \" + (item.className || \"\")}\n\t\t\t\tonClick={\n\t\t\t\t\titem.callback\n\t\t\t\t\t\t? (event: MouseEvent) => {\n\t\t\t\t\t\t\t\titem.callback(event);\n\t\t\t\t\t\t\t\tif (autoClose) this.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t: null\n\t\t\t\t}\n\t\t\t\tid={item.id}\n\t\t\t\tstyle={item.style}\n\t\t\t>\n\t\t\t\t{item.content}\n\t\t\t</div>\n\t\t);\n\t}\n\n\t/**\n\t *\n\t */\n\tprotected _updateSubmenusPosition() {\n\t\tconst submenus = this._containerMenu.querySelectorAll<HTMLElement>(\n\t\t\t\".\" + CLASS_SUBMENU,\n\t\t);\n\n\t\tsubmenus.forEach((submenu) => {\n\t\t\tconst position = submenu.dataset.position as SubmenuPosition;\n\t\t\tconst submenuContent = submenu.querySelector<HTMLElement>(\n\t\t\t\t\".\" + CLASS_SUBMENU_CONTENT,\n\t\t\t);\n\n\t\t\tconst submenuPosition = submenuContent.getBoundingClientRect();\n\t\t\tconst submenuWidth = submenuContent.offsetWidth;\n\n\t\t\t/**\n\t\t\t * Check if the default position is ok or needs to be inverted\n\t\t\t */\n\t\t\tconst evaluatePosition = (): SubmenuPosition => {\n\t\t\t\tif (position === SubmenuPosition.Left) {\n\t\t\t\t\tif (submenuPosition.right - submenuWidth <= 0) {\n\t\t\t\t\t\treturn SubmenuPosition.Right;\n\t\t\t\t\t}\n\t\t\t\t} else if (position === SubmenuPosition.Right) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tsubmenuPosition.right + submenuWidth >=\n\t\t\t\t\t\tdocument.documentElement.offsetWidth\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn SubmenuPosition.Left;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn position;\n\t\t\t};\n\n\t\t\tconst calculatedPosition = evaluatePosition();\n\t\t\tsubmenu.classList.add(CLASS_SUBMENU + \"-\" + calculatedPosition);\n\n\t\t\t// add arrow indicator\n\t\t\tconst submenuArrow = submenu.querySelector<HTMLElement>(\n\t\t\t\t\".\" + CLASS_SUBMENU_ARROW,\n\t\t\t);\n\t\t\tsubmenuArrow.innerHTML = \"\";\n\n\t\t\tif (calculatedPosition === SubmenuPosition.Left) {\n\t\t\t\tsubmenuArrow.append(arrowLeft());\n\t\t\t} else if (position === SubmenuPosition.Right) {\n\t\t\t\tsubmenuArrow.append(arrowRight());\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected _evaluateArrowPosition(position: PositionType) {\n\t\tlet arrowPositionClass = \"\";\n\n\t\tswitch (position) {\n\t\t\tcase Position.Bottom:\n\t\t\t\tarrowPositionClass = CLASS_SHOW_ARROW_TOP;\n\t\t\t\tbreak;\n\t\t\tcase Position.Top:\n\t\t\t\tarrowPositionClass = CLASS_SHOW_ARROW_BOTTOM;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis._containerMenu.classList.add(arrowPositionClass);\n\t}\n\n\tprotected addEventListeners(): void {\n\t\t// Close if click is outside the menu\n\t\tthis._closeListener = (evt: CustomEvent) => {\n\t\t\tif (!this._containerMenu.contains(evt.target as Node)) {\n\t\t\t\tthis.close();\n\t\t\t}\n\t\t};\n\n\t\tthis._resizeListener = () => {\n\t\t\tif (this.isOpen()) {\n\t\t\t\tthis.updatePosition(false);\n\t\t\t}\n\t\t};\n\n\t\tthis._scrollListener = (evt) => {\n\t\t\tif (\n\t\t\t\tthis.isOpen() &&\n\t\t\t\t(evt.target as HTMLElement).contains(this._toggler)\n\t\t\t) {\n\t\t\t\tthis.updatePosition(false);\n\t\t\t}\n\t\t};\n\n\t\tdocument.addEventListener(\"click\", this._closeListener);\n\t\twindow.addEventListener(\"resize\", this._resizeListener);\n\t\twindow.addEventListener(\"scroll\", this._scrollListener, true);\n\t}\n\n\tprotected removeEventListeners(): void {\n\t\tdocument.removeEventListener(\"click\", this._closeListener);\n\t\twindow.removeEventListener(\"resize\", this._resizeListener);\n\t\twindow.removeEventListener(\"scroll\", this._scrollListener);\n\t}\n}\n\nexport * from \"./@enums.js\";\n\n/**\n * Helper function to automaticaly add a separator between an array of sections\n * @param sections\n * @returns\n */\nexport function addSeparator(sections: Array<MenuItem | Submenu>[]) {\n\tconst separator = \"-\" as const;\n\n\treturn sections.reduce((acc, val) => {\n\t\treturn acc.length ? [...acc, separator, ...val] : [...acc, ...val];\n\t}, []);\n}\n\n/**\n * **_[interface]_**\n */\nexport interface OpenOptions extends Options {\n\tevent: MouseEvent;\n}\n\n/**\n * **_[interface]_**\n */\nexport interface Submenu {\n\tcontent: string | HTMLElement;\n\titems: MenuItem[];\n\t/**\n\t * Default is right\n\t */\n\tposition?: SubmenuPosition;\n\tid?: string;\n\tclassName?: string;\n\tstyle?: string;\n}\n\n/**\n * **_[interface]_**\n */\nexport interface MenuItem {\n\tcontent?: string | HTMLElement;\n\tid?: string;\n\tclassName?: string;\n\tstyle?: string;\n\tdataset?: any;\n\n\t/**\n\t * Function called when an item is clicked\n\t * @returns\n\t */\n\tcallback?: (evt: MouseEvent) => void;\n}\n\ntype PositionType = `${Position}`;\n\n/**\n * **_[interface]_**\n */\nexport interface Options {\n\t/**\n\t * Close menu after selecting an item\n\t * Defaults is true;\n\t */\n\tautoClose?: boolean;\n\n\t/**\n\t * Show the menu at top or at bottom of the toggler\n\t * Default is 'bottom'\n\t */\n\tposition?: PositionType;\n\n\t/**\n\t * Margin between the menu and the toggler button.\n\t * Default is 10 if `arrow` is true, otherwise is 2\n\t */\n\tmargin?: number;\n\n\t/**\n\t * Position to display the menu (toggler is not used at all)\n\t *\n\t */\n\tlocation?: {\n\t\tx: number;\n\t\ty: number;\n\t};\n\n\t/**\n\t * Offset to display the menu\n\t */\n\toffset?: {\n\t\tx?: number;\n\t\ty?: number;\n\t};\n\n\t/**\n\t * Custom classname to add to the popup menu\n\t */\n\tclassName?: string;\n\n\t/**\n\t * Show css arrow\n\t * Default is `true`\n\t */\n\tarrow?: boolean;\n\n\t/**\n\t * Prevent event propagation\n\t * Default is `true`\n\t */\n\tstopClick?: boolean;\n\n\t/**\n\t * Menu items to display in the menu\n\t */\n\tmenuItems?: Array<MenuItem | Submenu | \"-\">;\n}\n","import TinyPopupMenu from \"./tiny-popup-menu\";\nimport * as utils from \"./tiny-popup-menu\";\n\nObject.assign(TinyPopupMenu, utils);\nexport default TinyPopupMenu;\n"],"names":["E","prototype","on","name","callback","ctx","e","this","push","fn","once","self","listener","off","apply","arguments","_","emit","data","slice","call","evtArr","i","len","length","evts","liveEvents","tinyEmitterModule","exports","Position","SubmenuPosition","TinyEmitter","createElement","tagName","attrs","children","elem","DocumentFragment","document","Object","entries","forEach","value","undefined","startsWith","toLowerCase","window","addEventListener","substr","setAttribute","toString","child","Array","isArray","append","nodeType","innerHTML","appendChild","defaultOptions","position","Bottom","className","autoClose","arrow","margin","offset","x","y","menuItems","stopClick","ID","CLASS_CONTAINER","CLASS_OPEN","CLASS_SHOW_ARROW","CLASS_SHOW_ARROW_TOP","CLASS_SHOW_ARROW_BOTTOM","CLASS_ITEM","CLASS_SUBMENU","CLASS_SUBMENU_ARROW","CLASS_SUBMENU_CONTENT","CLASS_ITEM_SEPARATOR","instances","deepObjectAssign","target","sources","source","keys","key","s_val","t_val","TinyPopupMenu","constructor","options","super","_isOpen","_containerMenu","myPragma","id","_instanceOptions","open","_options","_parseOptions","isOpen","close","event","currentTarget","_toggler","preventDefault","stopPropagation","hasSubmenu","_menuItemsList","map","item","_processSubMenu","_processMenuItem","updatePosition","_updateSubmenusPosition","setTimeout","addEventListeners","remove","classList","removeEventListeners","silent","style","add","body","location","left","clientX","top","clientY","togglerPosition","getBoundingClientRect","togglerHeight","offsetHeight","togglerWidth","offsetWidth","evaluatePosition","Top","menuHeight","offsetTop","documentElement","offsetLeft","menuWidth","finalPosition","compensateMenuHeight","compensateMenuWidthToCenter","windowWidth","innerWidth","calculateLeft","adjustX","arrowWidth","extraMargin","Math","min","max","setProperty","_evaluateArrowPosition","addToggler","el","type","assign","mergedOptions","submenu","Right","content","items","onClick","querySelectorAll","dataset","submenuContent","querySelector","submenuPosition","submenuWidth","calculatedPosition","Left","right","submenuArrow","arrowPositionClass","_closeListener","evt","contains","_resizeListener","_scrollListener","removeEventListener","sections","reduce","acc","val","utils"],"mappings":"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","x_google_ignoreList":[0]}